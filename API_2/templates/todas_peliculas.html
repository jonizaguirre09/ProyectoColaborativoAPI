{% extends "base.html" %}

{% block content %}
    <h1>Todas las Películas</h1>
    <ul class="movie-list">
        {% for pelicula in todas_peliculas %}
            <li>
                <a href="#" onclick="obtenerDetalles('{{ pelicula }}')" style="color: black; text-decoration: none;">
                    {{ pelicula }}
                </a>
            </li>
        {% endfor %}
    </ul>

    <!-- Modal para mostrar detalles de la película -->
    <div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); color:white; padding:40px;">
        <div style="background:#333; padding:20px; border-radius:10px; max-width:500px; margin:auto;">
            <h2 id="titulo-pelicula"></h2>
            <p id="detalle-pelicula"></p>
            <button onclick="cerrarModal()">Cerrar</button>
        </div>
    </div>

    <script>
        function obtenerDetalles(pelicula) {
            fetch(`/detalles_pelicula?nombre=${encodeURIComponent(pelicula)}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("titulo-pelicula").innerText = pelicula;
                    document.getElementById("detalle-pelicula").innerText = data.detalles;
                    document.getElementById("modal").style.display = "block";
                })
                .catch(error => console.error('Error:', error));
        }

        function cerrarModal() {
            document.getElementById("modal").style.display = "none";
        }
    </script>
{% endblock %}
